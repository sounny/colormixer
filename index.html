<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Interactive Color Mixer - Learn about paint (RYB) and light (RGB) color mixing with this visual tool."
    />
    <title>Color Mixer - Paint & Light</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/reset.css" />
    <link rel="stylesheet" href="css/styles.css" />
    <link rel="stylesheet" href="css/patterns.css" />
  </head>
  <body class="paint-mode">
    <!-- Header -->
    <header class="header">
      <div class="header-title">
        <!-- Palette icon (Paint Mode) / Zap icon (Light Mode) -->
        <svg
          class="header-icon"
          id="header-icon"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <!-- Palette icon paths (default) -->
          <circle cx="13.5" cy="6.5" r=".5" fill="currentColor" />
          <circle cx="17.5" cy="10.5" r=".5" fill="currentColor" />
          <circle cx="8.5" cy="7.5" r=".5" fill="currentColor" />
          <circle cx="6.5" cy="12.5" r=".5" fill="currentColor" />
          <path
            d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.555C21.965 6.012 17.461 2 12 2z"
          />
        </svg>
        <h1 id="header-title-text">Paint Mixer</h1>
      </div>
      <p id="header-subtitle">Mixing paint gets darker!</p>
    </header>

    <!-- Mode Switcher -->
    <div class="mode-switcher" id="mode-switcher">
      <button
        class="mode-btn paint-btn"
        id="paint-mode-btn"
        onclick="switchMode('RYB')"
      >
        Paint (RYB)
      </button>
      <button
        class="mode-btn light-btn"
        id="light-mode-btn"
        onclick="switchMode('RGB')"
      >
        Light (RGB)
      </button>
    </div>

    <!-- Toggles Row -->
    <div style="display: flex; gap: 0.75rem; margin-bottom: 1.5rem; flex-wrap: wrap;">
    <!-- Accessibility Toggle -->
    <button class="challenge-toggle-btn" id="accessibility-toggle-btn" onclick="toggleAccessibilityMode()" style="margin-bottom: 0.5rem;" aria-pressed="false">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/>
        <circle cx="12" cy="12" r="3"/>
      </svg>
      <span>Accessibility</span>
    </button>

    <!-- High Contrast Toggle -->
    <button class="challenge-toggle-btn" id="high-contrast-toggle-btn" onclick="toggleHighContrastMode()" style="margin-bottom: 0.5rem;" aria-pressed="false">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="10"/>
        <path d="M12 2v20M2 12h20"/>
      </svg>
      <span>High Contrast</span>
    </button>

    <!-- Sound Toggle -->
    <button class="challenge-toggle-btn" id="sound-toggle-btn" onclick="toggleSound()" style="margin-bottom: 0.5rem;" aria-pressed="true">
      <svg id="sound-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M11 5L6 9H2v6h4l5 4V5z"/>
        <path d="M19.07 4.93a10 10 0 0 1 0 14.14"/>
        <path d="M15.54 8.46a5 5 0 0 1 0 7.07"/>
      </svg>
      <span>Sound</span>
    </button>

    <!-- Challenge Toggle -->
    <button class="challenge-toggle-btn" id="challenge-toggle-btn" onclick="toggleChallengeMode()" style="margin-bottom: 1rem;">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/>
        <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/>
        <path d="M4 22h16"/>
          <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/>
          <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/>
          <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/>
      </svg>
      <span>Game Mode</span>
    </button>

    <!-- Demo Mode Toggle -->
    <button class="challenge-toggle-btn" id="demo-toggle-btn" onclick="toggleDemoMode()" style="margin-bottom: 1rem;" aria-pressed="false">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polygon points="5 3 19 12 5 21 5 3"/>
      </svg>
      <span>Demo Mode</span>
    </button>

    <!-- Learning Path Toggle -->
    <button class="challenge-toggle-btn" id="learn-toggle-btn" onclick="toggleLearnMode()" style="margin-bottom: 1rem;" aria-pressed="false">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1-2.5-2.5Z"/>
        <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
      </svg>
      <span>Learn</span>
    </button>
    </div>

    <!-- Challenge Status Bar -->
    <div class="challenge-bar" id="challenge-bar">
      <div class="challenge-text">
        <span>Make:</span>
        <div class="challenge-target-dot" id="target-dot"></div>
        <span id="target-name">Purple</span>
      </div>
      <button class="challenge-btn" onclick="skipChallenge()">Skip</button>
    </div>

    <!-- Main Card -->
    <main class="main-card">
      <!-- Result Blob -->
      <div class="result-blob" id="result-blob" aria-live="polite" aria-atomic="true">
        <div class="shine" id="shine-effect"></div>
        <div style="display: flex; flex-direction: column; align-items: center;">
          <span class="result-name" id="result-name">White</span>
          <button class="hex-display" id="hex-display" onclick="copyHex()" aria-label="Copy HEX color code">
            <svg class="copy-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect width="14" height="14" x="8" y="8" rx="2" ry="2"/>
              <path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>
            </svg>
            <span id="hex-text">#FFFFFF</span>
          </button>
          <button class="share-btn" id="share-btn" onclick="shareLink()" aria-label="Share this color mix">
            <svg class="share-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/>
              <polyline points="16,6 12,2 8,6"/>
              <line x1="12" y1="2" x2="12" y2="15"/>
            </svg>
            Share Link
          </button>
        </div>
      </div>

      <!-- Equation Text -->
      <div class="equation-container">
        <p class="equation-text" id="equation-text" role="status">Pick a color to start</p>
      </div>

      <!-- Educational Tooltip -->
      <div class="edu-tooltip-container">
        <button id="tooltip-toggle" class="tooltip-btn" onclick="toggleTooltip()" aria-expanded="false">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
            <line x1="12" y1="17" x2="12.01" y2="17"></line>
          </svg>
          Learn Why
        </button>
        <div id="edu-tooltip" class="tooltip-content" role="status">
          <p id="tooltip-text">Mix colors to learn how they work!</p>
        </div>
      </div>

      <!-- Real-World Examples -->
      <div class="examples" id="examples">Examples: apples, strawberries</div>

      <!-- Color Buttons -->
      <div class="color-buttons" id="color-buttons">
        <!-- Buttons injected by JS -->
      </div>

      <!-- Reset Button -->
      <button class="reset-btn" onclick="reset()" aria-label="Reset Colors">
        <svg
          class="reset-icon"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8" />
          <path d="M3 3v5h5" />
        </svg>
        <span>Reset / Clear</span>
      </button>

      <!-- Screen Reader Announcer -->
      <div id="sr-announcer" class="sr-only" aria-live="polite"></div>
    </main>

    <!-- Footer -->
    <footer class="footer" id="footer-text">
      <span id="footer-main-text">Red + Yellow + Blue = Brown Paint</span>
      <span class="keyboard-hint">
        Keyboard: <kbd class="kbd">R</kbd><kbd class="kbd">Y</kbd><kbd class="kbd">B</kbd> colors Â· <kbd class="kbd">Space</kbd> reset Â· <kbd class="kbd">Tab</kbd> mode
      </span>
    </footer>

    <!-- Success Overlay -->
    <div class="success-overlay" id="success-overlay">
      <div class="success-card">
        <span class="success-icon">ðŸŽ‰</span>
        <h2 class="success-title">You Did It!</h2>
        <p id="success-message">You made Purple!</p>
        <button class="success-btn" onclick="nextChallenge()">Next Level</button>
      </div>
    </div>

    <script src="js/state.js"></script>
    <script src="js/app.js"></script>

    <!-- Tutorial Modal -->
    <div id="tutorial-backdrop" class="tutorial-backdrop" style="display: none;"></div>
    <div id="tutorial-modal" class="modal" style="display: none;" role="dialog" aria-modal="true" aria-labelledby="tutorial-title" aria-describedby="tutorial-text">
      <div class="modal-content">
        <h2 id="tutorial-title">Welcome to Color Mixer!</h2>
        <p id="tutorial-text">Step 1: Click a color button to start mixing.</p>
        <button id="tutorial-next">Next</button>
        <button id="tutorial-skip" type="button">Skip Tutorial</button>
      </div>
    </div>
  </body>
</html>